package flare

import (
  "math/big"
  "net/http"
  "time"
)


// Fixed gas used for custom block.coinbase operations
func GetFixedGasUsed(BlockNumber *big.Int) (uint64) {
    switch {
        default:
            return 100000
    }
}

// Fixed gas used for custom block.coinbase operations
func GetDataFee(BlockNumber *big.Int) (uint64) {
    switch {
        default:
            return 10000000
    }
}

func GetGovernanceContractAddr(BlockNumber *big.Int) (string) {
    switch {
        default:
            return "0x1000000000000000000000000000000000000000"
    }
}

func GetStateConnectorContractAddr(BlockNumber *big.Int) (string) {
    switch {
        default:
            return "0x1000000000000000000000000000000000000001"
    }
}

func GetRegisterClaimPeriodSelector(BlockNumber *big.Int) ([]byte) {
    switch {
        default:
            return []byte{0x76,0x0f,0x6a,0x5a}
    }
}

var (
  tr = &http.Transport{
    MaxIdleConns:       10,
    IdleConnTimeout:    60 * time.Second,
    DisableCompression: true,
  }
  client = &http.Client{Transport: tr}
)

const (

  CostonGenesis = `{
    "config": {
      "chainId": 16,
      "homesteadBlock": 0,
      "daoForkBlock": 0,
      "daoForkSupport": true,
      "eip150Block": 0,
      "eip150Hash": "0x2086799aeebeae135c246c65021c82b4e15a2c451340993aacfd2751886514f0",
      "eip155Block": 0,
      "eip158Block": 0,
      "byzantiumBlock": 0,
      "constantinopleBlock": 0,
      "petersburgBlock": 0
    },
    "nonce": "0x0",
    "timestamp": "0x0",
    "extraData": "0x00",
    "gasLimit": "0x5f5e100",
    "difficulty": "0x0",
    "mixHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "coinbase": "0x0100000000000000000000000000000000000000",
    "alloc": {
      "1000000000000000000000000000000000000001": {
        "balance": "0x0",
        "code": "0x608060405234801561001057600080fd5b50600436106100a95760003560e01c8063760f6a5a11610071578063760f6a5a1461018c578063b172b222146101c0578063ef2fa85f146101de578063ef4c169e146101fc578063efe782721461021a578063f08ca9871461024a576100a9565b806307003bb4146100ae5780631129753f146100cc5780632cd2f4c6146100fc578063407f908c1461012c578063550d098e1461015c575b600080fd5b6100b661027e565b6040516100c39190611c45565b60405180910390f35b6100e660048036038101906100e19190611595565b610291565b6040516100f39190611c45565b60405180910390f35b61011660048036038101906101119190611686565b61036b565b6040516101239190611c45565b60405180910390f35b61014660048036038101906101419190611764565b6104d8565b6040516101539190611c45565b60405180910390f35b610176600480360381019061017191906115e7565b61069a565b6040516101839190611c45565b60405180910390f35b6101a660048036038101906101a19190611623565b6107ac565b6040516101b7959493929190611c60565b60405180910390f35b6101c8610ea6565b6040516101d59190611c2a565b60405180910390f35b6101e6610eca565b6040516101f39190611c2a565b60405180910390f35b610204610ef3565b6040516102119190611c45565b60405180910390f35b610234600480360381019061022f919061156c565b611085565b6040516102419190611ea6565b60405180910390f35b610264600480360381019061025f91906115be565b6110ce565b604051610275959493929190611ec1565b60405180910390f35b600060149054906101000a900460ff1681565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161031990611d66565b60405180910390fd5b816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060019050919050565b600060011515600160008c815260200190815260200160002060000160009054906101000a900460ff161515146103d7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103ce90611e86565b60405180910390fd5b600115156103e6858c8c6111c6565b151514610428576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161041f90611de6565b60405180910390fd5b826104368b8a8a8a8a611338565b14610476576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161046d90611d86565b60405180910390fd5b600115156104858585856113eb565b1515146104c7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104be90611d46565b60405180910390fd5b600190509998505050505050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610569576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161056090611d66565b60405180910390fd5b600015156001600087815260200190815260200160002060000160009054906101000a900460ff161515146105d3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105ca90611da6565b60405180910390fd5b6040518061010001604052806001151581526020018581526020018481526020016000815260200185815260200142815260200183815260200160008152506001600087815260200190815260200160002060008201518160000160006101000a81548160ff0219169083151502179055506020820151816001015560408201518160020155606082015181600301556080820151816004015560a0820151816005015560c0820151816006015560e0820151816007015590505060019050949350505050565b6000600115156001600085815260200190815260200160002060000160009054906101000a900460ff16151514610706576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106fd90611e86565b60405180910390fd5b6000836040516020016107199190611c0f565b60405160208183030381529060405280519060200120836040516020016107409190611c0f565b60405160208183030381529060405280519060200120604051602001610767929190611be3565b6040516020818303038152906040528051906020012090506002600082815260200190815260200160002060000160009054906101000a900460ff1691505092915050565b60008060008060003273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610822576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161081990611e06565b60405180910390fd5b60011515600160008b815260200190815260200160002060000160009054906101000a900460ff1615151461088c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161088390611e86565b60405180910390fd5b600160008a815260200190815260200160002060050154421061091d57600160008a815260200190815260200160002060070154600160008b81526020019081526020016000206005015442036002021161091c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161091390611d06565b60405180910390fd5b5b6000896040516020016109309190611c0f565b60405160208183030381529060405280519060200120886040516020016109579190611c0f565b6040516020818303038152906040528051906020012060405160200161097e929190611be3565b604051602081830303815290604052805190602001209050600015156002600083815260200190815260200160002060000160009054906101000a900460ff16151514610a00576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109f790611d26565b60405180910390fd5b6000881115610af15760008a604051602001610a1c9190611c0f565b6040516020818303038152906040528051906020012060018a03604051602001610a469190611c0f565b60405160208183030381529060405280519060200120604051602001610a6d929190611be3565b604051602081830303815290604052805190602001209050600115156002600083815260200190815260200160002060000160009054906101000a900460ff16151514610aef576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ae690611dc6565b60405180910390fd5b505b3373ffffffffffffffffffffffffffffffffffffffff164173ffffffffffffffffffffffffffffffffffffffff161480610b6a575073010000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff164173ffffffffffffffffffffffffffffffffffffffff16145b610ba9576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ba090611e46565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff164173ffffffffffffffffffffffffffffffffffffffff16148015610c24575073010000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff164173ffffffffffffffffffffffffffffffffffffffff1614155b15610e73576001600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506040518060400160405280600115158152602001888152506002600083815260200190815260200160002060008201518160000160006101000a81548160ff0219169083151502179055506020820151816001015590505060018801600160008c81526020019081526020016000206003018190555088600160008c815260200190815260200160002060040181905550600160008b8152602001908152602001600020600501544210610e155760006002600160008d815260200190815260200160002060050154420381610d8157fe5b049050600160008c815260200190815260200160002060060154811115610dd857600160008c815260200190815260200160002060060154600160008d815260200190815260200160002060070181905550610df4565b80600160008d8152602001908152602001600020600701819055505b42600160008d81526020019081526020016000206005018190555050610e47565b600160008b815260200190815260200160002060060154600160008c8152602001908152602001600020600701819055505b60018a8a600160008e8152602001908152602001600020600201548a9550955095509550955050610e9b565b60008a8a600160008e8152602001908152602001600020600201548a95509550955095509550505b945094509450945094565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000801515600060149054906101000a900460ff16151514610f4a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f4190611e26565b60405180910390fd5b7310000000000000000000000000000000000000006000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604051806101000160405280600115158152602001630395e6bc8152602001601e815260200160008152602001630395e6bc8152602001428152602001603c815260200160008152506001600080815260200190815260200160002060008201518160000160006101000a81548160ff0219169083151502179055506020820151816001015560408201518160020155606082015181600301556080820151816004015560a0820151816005015560c0820151816006015560e082015181600701559050506001600060146101000a81548160ff0219169083151502179055506001905090565b6000600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000806000806000600115156001600088815260200190815260200160002060000160009054906101000a900460ff16151514611140576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161113790611e86565b60405180910390fd5b600160008781526020019081526020016000206001015460016000888152602001908152602001600020600301546001600089815260200190815260200160002060020154600160008a815260200190815260200160002060040154600160008b8152602001908152602001600020600501549450945094509450945091939590929450565b6000600115156001600085815260200190815260200160002060000160009054906101000a900460ff16151514611232576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122990611e86565b60405180910390fd5b6000836040516020016112459190611c0f565b604051602081830303815290604052805190602001208360405160200161126c9190611c0f565b60405160208183030381529060405280519060200120604051602001611293929190611be3565b604051602081830303815290604052805190602001209050600115156002600083815260200190815260200160002060000160009054906101000a900460ff16151514611315576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161130c90611e66565b60405180910390fd5b846002600083815260200190815260200160002060010154149150509392505050565b6000808660405160200161134c9190611ea6565b60405160208183030381529060405280519060200120866040516020016113739190611ea6565b6040516020818303038152906040528051906020012086868660405160200161139c9190611ea6565b604051602081830303815290604052805190602001206040516020016113c6959493929190611cb3565b6040516020818303038152906040528051906020012090508091505095945050505050565b60008083905060005b835181101561148757600084828151811061140b57fe5b602002602001015190508083101561144d578281604051602001611430929190611be3565b604051602081830303815290604052805190602001209250611479565b8083604051602001611460929190611be3565b6040516020818303038152906040528051906020012092505b5080806001019150506113f4565b508481149150509392505050565b6000813590506114a481611ffc565b92915050565b6000813590506114b981612013565b92915050565b600082601f8301126114d057600080fd5b81356114e36114de82611f45565b611f14565b9150818183526020840193506020810190508385602084028201111561150857600080fd5b60005b83811015611538578161151e8882611542565b84526020840193506020830192505060018101905061150b565b5050505092915050565b6000813590506115518161202a565b92915050565b60008135905061156681612041565b92915050565b60006020828403121561157e57600080fd5b600061158c84828501611495565b91505092915050565b6000602082840312156115a757600080fd5b60006115b5848285016114aa565b91505092915050565b6000602082840312156115d057600080fd5b60006115de84828501611557565b91505092915050565b600080604083850312156115fa57600080fd5b600061160885828601611557565b925050602061161985828601611557565b9150509250929050565b6000806000806080858703121561163957600080fd5b600061164787828801611557565b945050602061165887828801611557565b935050604061166987828801611557565b925050606061167a87828801611542565b91505092959194509250565b60008060008060008060008060006101208a8c0312156116a557600080fd5b60006116b38c828d01611557565b99505060206116c48c828d01611557565b98505060406116d58c828d01611557565b97505060606116e68c828d01611542565b96505060806116f78c828d01611542565b95505060a06117088c828d01611557565b94505060c06117198c828d01611542565b93505060e061172a8c828d01611542565b9250506101008a013567ffffffffffffffff81111561174857600080fd5b6117548c828d016114bf565b9150509295985092959850929598565b6000806000806080858703121561177a57600080fd5b600061178887828801611557565b945050602061179987828801611557565b93505060406117aa87828801611557565b92505060606117bb87828801611557565b91505092959194509250565b6117d081611f82565b82525050565b6117df81611fa6565b82525050565b6117ee81611fb2565b82525050565b61180561180082611fb2565b611fe6565b82525050565b6000611818602c83611f71565b91507f6e6f7420656e6f7567682074696d6520656c61707365642073696e636520707260008301527f696f722066696e616c69747900000000000000000000000000000000000000006020830152604082019050919050565b600061187e602183611f71565b91507f636c61696d506572696f644861736820616c72656164792066696e616c69736560008301527f64000000000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b60006118e4601483611f71565b91507f5061796d656e74206e6f742076657269666965640000000000000000000000006000830152602082019050919050565b6000611924602083611f71565b91507f6d73672e73656e64657220213d20676f7665726e616e6365436f6e74726163746000830152602082019050919050565b6000611964601783611f71565b91507f636f6e73747275637465644c65616620213d206c6561660000000000000000006000830152602082019050919050565b60006119a4601683611f71565b91507f636861696e496420616c726561647920657869737473000000000000000000006000830152602082019050919050565b60006119e4602783611f71565b91507f70726576696f757320636c61696d20706572696f64206e6f742079657420666960008301527f6e616c69736564000000000000000000000000000000000000000000000000006020830152604082019050919050565b6000611a4a601a83611f71565b91507f436c61696d20706572696f64206e6f742066696e616c697365640000000000006000830152602082019050919050565b6000611a8a601783611f71565b91507f6d73672e73656e64657220213d2074782e6f726967696e0000000000000000006000830152602082019050919050565b6000611aca601483611f71565b91507f696e697469616c6973656420213d2066616c73650000000000000000000000006000830152602082019050919050565b6000611b0a601c83611f71565b91507f496e76616c696420626c6f636b2e636f696e626173652076616c7565000000006000830152602082019050919050565b6000611b4a601e83611f71565b91507f636c61696d506572696f644861736820646f6573206e6f7420657869737400006000830152602082019050919050565b6000611b8a601683611f71565b91507f636861696e496420646f6573206e6f74206578697374000000000000000000006000830152602082019050919050565b611bc681611fdc565b82525050565b611bdd611bd882611fdc565b611ff0565b82525050565b6000611bef82856117f4565b602082019150611bff82846117f4565b6020820191508190509392505050565b6000611c1b8284611bcc565b60208201915081905092915050565b6000602082019050611c3f60008301846117c7565b92915050565b6000602082019050611c5a60008301846117d6565b92915050565b600060a082019050611c7560008301886117d6565b611c826020830187611bbd565b611c8f6040830186611bbd565b611c9c6060830185611bbd565b611ca960808301846117e5565b9695505050505050565b600060a082019050611cc860008301886117e5565b611cd560208301876117e5565b611ce260408301866117e5565b611cef60608301856117e5565b611cfc60808301846117e5565b9695505050505050565b60006020820190508181036000830152611d1f8161180b565b9050919050565b60006020820190508181036000830152611d3f81611871565b9050919050565b60006020820190508181036000830152611d5f816118d7565b9050919050565b60006020820190508181036000830152611d7f81611917565b9050919050565b60006020820190508181036000830152611d9f81611957565b9050919050565b60006020820190508181036000830152611dbf81611997565b9050919050565b60006020820190508181036000830152611ddf816119d7565b9050919050565b60006020820190508181036000830152611dff81611a3d565b9050919050565b60006020820190508181036000830152611e1f81611a7d565b9050919050565b60006020820190508181036000830152611e3f81611abd565b9050919050565b60006020820190508181036000830152611e5f81611afd565b9050919050565b60006020820190508181036000830152611e7f81611b3d565b9050919050565b60006020820190508181036000830152611e9f81611b7d565b9050919050565b6000602082019050611ebb6000830184611bbd565b92915050565b600060a082019050611ed66000830188611bbd565b611ee36020830187611bbd565b611ef06040830186611bbd565b611efd6060830185611bbd565b611f0a6080830184611bbd565b9695505050505050565b6000604051905081810181811067ffffffffffffffff82111715611f3b57611f3a611ffa565b5b8060405250919050565b600067ffffffffffffffff821115611f6057611f5f611ffa565b5b602082029050602081019050919050565b600082825260208201905092915050565b6000611f8d82611fbc565b9050919050565b6000611f9f82611fbc565b9050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b6000819050919050565b6000819050919050565bfe5b61200581611f82565b811461201057600080fd5b50565b61201c81611f94565b811461202757600080fd5b50565b61203381611fb2565b811461203e57600080fd5b50565b61204a81611fdc565b811461205557600080fd5b5056fea26469706673582212206a9cf40dd7ef54eb9a7b3997149520ec483b57345bd12148e68e0469229410c164736f6c63430007030033"
      },
      "9b200C53C8635a3d5972e1Dc5a7661713143987C": {
        "balance": "0x314dc6448d9338c15B0a00000000"
      },
      "3D3f2a9B0E231ffa0dBBE6Ef12f33Dc66E72Bf17": {
        "balance": "0x314dc6448d9338c15B0a00000000"
      },
      "8AA75C4751ca8B419f345EA62bD91D4032ed40Ab": {
        "balance": "0x314dc6448d9338c15B0a00000000"
      },
      "5e60D64E668F388e0a4f70930B67126fCcC4B543": {
        "balance": "0x314dc6448d9338c15B0a00000000"
      }
    },
    "number": "0x0",
    "gasUsed": "0x0",
    "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000"
  }`

  FlareGenesis = `{
    "config": {
      "chainId": 14,
      "homesteadBlock": 0,
      "daoForkBlock": 0,
      "daoForkSupport": true,
      "eip150Block": 0,
      "eip150Hash": "0x2086799aeebeae135c246c65021c82b4e15a2c451340993aacfd2751886514f0",
      "eip155Block": 0,
      "eip158Block": 0,
      "byzantiumBlock": 0,
      "constantinopleBlock": 0,
      "petersburgBlock": 0
    },
    "nonce": "0x0",
    "timestamp": "0x0",
    "extraData": "0x00",
    "gasLimit": "0x5f5e100",
    "difficulty": "0x0",
    "mixHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "coinbase": "0x0100000000000000000000000000000000000000",
    "alloc": {
    },
    "number": "0x0",
    "gasUsed": "0x0",
    "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000"
  }`
)
